# ═══════════════════════════════════════════════════════════════
# BACKEND API Environment Configuration
# ═══════════════════════════════════════════════════════════════
# This is the BACKEND API server that handles scraping logic
# Port: 3002 (default)
# ═══════════════════════════════════════════════════════════════

# ┌─────────────────────────────────────────────────────────────┐
# │ SUPABASE (Required)                                         │
# │ Get from: supabase.com → Project → Settings → API           │
# │ Backend needs BOTH anon key AND service role key            │
# └─────────────────────────────────────────────────────────────┘
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGci...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGci...              # ← For admin operations

# ┌─────────────────────────────────────────────────────────────┐
# │ REDIS (Required for Rate Limiting)                          │
# │ Get from: upstash.com → Create Database → REST API          │
# │ Used for: Rate limiting, API response caching               │
# └─────────────────────────────────────────────────────────────┘
UPSTASH_REDIS_REST_URL=https://xxxxx.upstash.io
UPSTASH_REDIS_REST_TOKEN=AXxxxx...

# For BullMQ queue (bot concurrent processing)
# Format: rediss://default:TOKEN@HOST:6379
UPSTASH_REDIS_URL=rediss://default:AXxxxx...@xxxxx.upstash.io:6379

# ┌─────────────────────────────────────────────────────────────┐
# │ SECURITY (Required)                                         │
# │ Generate: openssl rand -hex 16 (for ENCRYPTION_KEY)         │
# │ Generate: openssl rand -hex 32 (for JWT_SECRET)             │
# └─────────────────────────────────────────────────────────────┘
ENCRYPTION_KEY=your-32-char-hex-key                # ← For cookie encryption
JWT_SECRET=your-64-char-hex-key                    # ← For token signing (optional)

# ┌─────────────────────────────────────────────────────────────┐
# │ CORS (Required - CRITICAL!)                                 │
# │ Comma-separated list of allowed frontend origins            │
# │ ⚠️ If empty, ALL requests to /api/v1/publicservices BLOCKED │
# │ Development: http://localhost:3001                          │
# │ Production: https://downaria.vercel.app                     │
# └─────────────────────────────────────────────────────────────┘
ALLOWED_ORIGINS=http://localhost:3001,https://downaria.vercel.app,https://xt-fetch.vercel.app

# ┌─────────────────────────────────────────────────────────────┐
# │ PUSH NOTIFICATIONS (Optional)                               │
# │ Generate: npx web-push generate-vapid-keys                  │
# │ Backend needs BOTH public and private keys                  │
# └─────────────────────────────────────────────────────────────┘
VAPID_PUBLIC_KEY=BPxxx...
VAPID_PRIVATE_KEY=xxx...                           # ← NEVER expose to frontend
VAPID_SUBJECT=mailto:your@email.com

# ┌─────────────────────────────────────────────────────────────┐
# │ INTEGRATIONS (Optional)                                     │
# └─────────────────────────────────────────────────────────────┘
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/...

# ┌─────────────────────────────────────────────────────────────┐
# │ LOGGING (Optional)                                          │
# └─────────────────────────────────────────────────────────────┘
LOG_LEVEL=info                                     # error | info | debug

# ┌─────────────────────────────────────────────────────────────┐
# │ TELEGRAM BOT (Required for bot functionality)               │
# │ Get token from @BotFather on Telegram                       │
# │ ⚠️ TELEGRAM_WEBHOOK_SECRET is MANDATORY for security!       │
# └─────────────────────────────────────────────────────────────┘
TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_ADMIN_IDS=123456789,987654321             # Comma-separated admin user IDs
TELEGRAM_WEBHOOK_SECRET=your-random-secret-here    # ← REQUIRED! Generate: openssl rand -hex 32
TELEGRAM_BOT_USERNAME=downariaxt_bot               # Without @
TELEGRAM_ADMIN_USERNAME=risunCode                  # Admin contact for /donate
